<div class="product-grid">
  {% assign product_1 = section.settings.product_1 %}
  {% assign product_2 = section.settings.product_2 %}
  {% assign product_3 = section.settings.product_3 %}
  {% assign product_4 = section.settings.product_4 %}
  {% assign product_5 = section.settings.product_5 %}
  {% assign product_6 = section.settings.product_6 %}

  <div class="product-grid-container">
    {% if product_1 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/black-bag-over-the-shoulder_925x_4cae5708-5e9e-4e7e-96ec-9649f0c20cd8.jpg?v=1733769219');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_1.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/black-bag-over-the-shoulder_925x_4cae5708-5e9e-4e7e-96ec-9649f0c20cd8.jpg?v=1733769219', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_2 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/man-adjusts-blue-tuxedo-bowtie_925x_55a49e12-d54b-488e-b7a0-ea4c201eb01f.jpg?v=1733769202');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_2.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/man-adjusts-blue-tuxedo-bowtie_925x_55a49e12-d54b-488e-b7a0-ea4c201eb01f.jpg?v=1733769202', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_3 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/red-plaid-shirt_925x_70e9e5a8-8fc5-4d60-9a9a-cc2e0dd57cc9.jpg?v=1733769209');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_3.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/red-plaid-shirt_925x_70e9e5a8-8fc5-4d60-9a9a-cc2e0dd57cc9.jpg?v=1733769209', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_4 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/leather-jacket-and-tea_925x_2490cde1-7e61-4151-9a65-de8a763bc701.jpg?v=1733769229');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_4.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/leather-jacket-and-tea_925x_2490cde1-7e61-4151-9a65-de8a763bc701.jpg?v=1733769229', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_5 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/casual-fashion-woman_925x_56b56608-f207-45c1-b677-bb5aa26c1c7a.jpg?v=1733769238');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_5.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/casual-fashion-woman_925x_56b56608-f207-45c1-b677-bb5aa26c1c7a.jpg?v=1733769238', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_6 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/young-female-models-denim_925x_44c2cf9e-4030-4347-9d4a-f0e4a1479b4a.jpg?v=1733769226');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_6.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/young-female-models-denim_925x_44c2cf9e-4030-4347-9d4a-f0e4a1479b4a.jpg?v=1733769226', 'Bag', 'This is a detailed description of the product.', 29.99,'Red','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<!-- Popup Modal -->
<div id="product-popup" class="popup-modal" style="display: none;">
  <div class="popup-content">
    <span class="close-popup-btn" onclick="closePopup()">&times;</span>
    <!-- Product Details -->
    <div class="popup-product-details">
      <!-- Row 1: Image and Product Info -->
      <div class="product-row">
        <div class="product-image-container">
          <img id="popup-Product-Image" src="" alt="Product Image" width="20px" height="20px">
        </div>
        <div class="product-info-container">
          <h2 id="popup-product-name"></h2>
          <p id="popup-product-description"></p>
          <p id="popup-product-price"></p>
        </div>
      </div>
      <!-- Row 2: Color Selection -->
      <div class="product-row">
        <div id="product-color-options">
          <div id="productcolor1" class="color-option"></div>
          <div id="productcolor2" class="color-option"></div>
        </div>
      </div>

      <!-- Row 3: Size Selection -->
      <div class="product-row">
        <label for="product-size">Select Size:</label>
        <select id="product-size"></select>
      </div>

      <!-- Add to Cart Button -->
      <button id="add-to-cart-btn">Add to Cart</button>
    </div>
  </div>
</div>
<script>
   function openPopup(imageUrl, name, description, price,color1,color2) {
           console.log(typeof color1, typeof color2);
            document.getElementById('popup-Product-Image').src = imageUrl;
            document.getElementById('popup-product-name').textContent = name;
            document.getElementById('popup-product-description').textContent = description;
            document.getElementById('popup-product-price').textContent = '$' + price.toFixed(2);
            document.getElementById('product-popup').style.display = 'block';
        
           const color1Element = document.getElementById('productcolor1');
    const color2Element = document.getElementById('productcolor2');
          
        color1Element.innerHTML = `${color1}`;
        color2Element.innerHTML = `${color2}`;
     
  // Event listeners to select colors
color1Element.addEventListener('click', function(event) {
    console.log("color1 clicked");
  selectColor(event,color1);
});

color2Element.addEventListener('click', function(event) {
   selectColor(event,color2);
});
           const sizeSelect = document.getElementById('product-size');
            sizeSelect.innerHTML = `
                <option value="xs">XS</option>
                <option value="xs">S</option>
                <option value="m">M</option>
                <option value="l">L</option>
                <option value="xl">XL</option>
                <option value="2xl">2XL</option>
                <option value="6xl">6XL</option>`;
              
      const selectedSize = sizeSelect.value; // Get the selected size
     sizeSelect.addEventListener('change', addSizeToCart(selectedSize));
        
   }
  
  function selectColor(event,color) {
   const allColorDivs = document.querySelectorAll('.color-option');
    allColorDivs.forEach(div => div.classList.remove('selected'));

    // Add 'selected' class to the clicked color div (use event.target instead of this)
    event.target.classList.add('selected');

    // Optionally, handle the add-to-cart action here
    addToCart(color);
}


  function addToCart(color) {
    console.log(`Color ${color} added to the cart!`);
    
}
  function addSizeToCart(selectedSize) {
   
    console.log(`Size ${selectedSize} added to the cart!`);
    
    // Implement your actual cart functionality here
    // For example, you might call a function to update the cart with the selected size.
}
        function closePopup() {
            document.getElementById('product-popup').style.display = 'none';
        }
</script>

<style>
          .product-grid {
          width: 100%;
          margin: 0 auto;
        }

        .product-grid-container {
          display: grid;
          grid-template-columns: repeat(3, 1fr); /* Creates 3 equal columns */
          gap: 20px; /* Adds space between the blocks */
          margin-top: 20px;
        }

        .product-block {
          position: relative;
        }

        .product-image {
          width: 100%;
          height: 250px; /* Adjust this as per your requirement */
          background-size: cover;
          background-position: center;
          position: relative;
        }

          .open-popup-btn {
          position: absolute;
          top: 10px;
          right: 10px;
          background-color: rgba(0, 0, 0, 0.7);
          color: #fff;
          border: none;
          border-radius: 50%;
          padding: 10px;
          font-size: 20px;
          cursor: pointer;
        }

         /* Modal Styling */
        .popup-modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.7); /* Semi-transparent background */
          z-index: 9999;
          display: flex; /* Flexbox to center content */
          justify-content: center; /* Center horizontally */
          align-items: center; /* Center vertically */
        }

        /* Modal Content Styling */
        .popup-content {
          position: relative;
          background-color: #fff;
          padding: 20px;
          max-width: 800px; /* Maximum width of the modal */
          width: 100%; /* Make modal content responsive */
          border-radius: 8px;
          display: flex;
          flex-direction: column;
          overflow-y: auto; /* Allow scroll if content overflows */
        }

        /* Close Button Styling */
        .close-popup-btn {
          position: absolute;
          top: 10px;
          right: 10px;
          font-size: 30px;
          color: #333;
          background: none;
          border: none;
          cursor: pointer;
        }

        /* Product Details Section */
        .popup-product-details {
          display: flex;
          flex-direction: column;
        }

        /* Row Layout */
        .product-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }

        .product-image-container {
          width: 40%; /* Adjust to fit image */
        }

        .product-image-container img {
          width: 100%;
          height: auto;
          border-radius: 8px; /* Optional: rounding corners of the image */
        }

        .product-info-container {
          width: 55%; /* Adjust to fit the text */
        }

        .product-info-container h2 {
          margin: 0;
          font-size: 24px;
        }

        .product-info-container p {
          font-size: 18px;
          color: #333;
        }

        /* Color & Size Options */
         /* Styling for color boxes */
      product-row {
        display: flex;               /* Use flexbox to divide the row into two halves */
        border: 2px solid #ccc;      /* Border around the entire product row */
        border-radius: 8px;          /* Optional: Round the corners of the row */
        margin-bottom: 10px;         /* Optional: Space below the row */
    }

    #product-color-options {
        display: flex;               /* Use flexbox to align child divs horizontally */
        width: 100%;
       border: 2px solid #ccc/* Make the color options take up full width of the row */
    }

    #productcolor1, #productcolor2 {
        width: 50%;                  /* Each div takes up half the width of the row */
        display: flex;               /* Use flexbox inside each color div */
        justify-content: center;     /* Center the content horizontally */
        align-items: center;         /* Center the content vertically */
        font-size: 20px;             /* Font size of the text inside color boxes */
        padding: 10px;               /* Optional: Add padding for spacing */
        text-align: center;          /* Center the text */
    }

    #productcolor1 {
        border-right: 2px solid #ccc; /* Add a border between the two halves */
    }
   .selected {
      border: 2px solid #000; /* Highlight selected color */
  }


                /* Styling for the product size dropdown */
                 #product-size {
                    padding: 5px;
                    font-size: 16px;
                    border-radius: 5px;
                    border: 1px solid #ccc;
                }
        /* Add to Cart Button */
        #add-to-cart-btn {
          padding: 10px 20px;
          font-size: 18px;
          background-color: #333;
          color: white;
          border: none;
          cursor: pointer;
          margin-top: 20px;
          border-radius: 5px;
        }

        #add-to-cart-btn:hover {
          background-color: #555;
        }
</style>
{% schema %}
 {
  "name": "Product Liquid",
  "settings": [
    {
      "type": "product",
      "label": "Select Product 1",
      "id": "product_1",
      "info": "Choose the first product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 2",
      "id": "product_2",
      "info": "Choose the second product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 3",
      "id": "product_3",
      "info": "Choose the third product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 4",
      "id": "product_4",
      "info": "Choose the fourth product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 5",
      "id": "product_5",
      "info": "Choose the fifth product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 6",
      "id": "product_6",
      "info": "Choose the sixth product for the grid."
    }
  ],
  "presets": [
    {
      "name":"Product Liquid",
    }
  ]
}
{% endschema %}
