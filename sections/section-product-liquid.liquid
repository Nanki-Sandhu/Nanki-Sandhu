<div><h1>The Tisso Vison in The Wild</h1></div>
<div class="product-grid">
  {% assign product_1 = section.settings.product_1 %}
  {% assign product_2 = section.settings.product_2 %}
  {% assign product_3 = section.settings.product_3 %}
  {% assign product_4 = section.settings.product_4 %}
  {% assign product_5 = section.settings.product_5 %}
  {% assign product_6 = section.settings.product_6 %}

  <div class="product-grid-container">
    {% if product_1 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/black-bag-over-the-shoulder_925x_4cae5708-5e9e-4e7e-96ec-9649f0c20cd8.jpg?v=1733769219');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_1.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/black-bag-over-the-shoulder_925x_4cae5708-5e9e-4e7e-96ec-9649f0c20cd8.jpg?v=1733769219', 'Orange Wide Leg', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'White','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_2 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/man-adjusts-blue-tuxedo-bowtie_925x_55a49e12-d54b-488e-b7a0-ea4c201eb01f.jpg?v=1733769202');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_2.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/man-adjusts-blue-tuxedo-bowtie_925x_55a49e12-d54b-488e-b7a0-ea4c201eb01f.jpg?v=1733769202', 'Tailored Jacket', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'Blue','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_3 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/red-plaid-shirt_925x_70e9e5a8-8fc5-4d60-9a9a-cc2e0dd57cc9.jpg?v=1733769209');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_3.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/red-plaid-shirt_925x_70e9e5a8-8fc5-4d60-9a9a-cc2e0dd57cc9.jpg?v=1733769209', 'Accordin Pleated Dress', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'Red','Grey')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_4 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/leather-jacket-and-tea_925x_2490cde1-7e61-4151-9a65-de8a763bc701.jpg?v=1733769229');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_4.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/leather-jacket-and-tea_925x_2490cde1-7e61-4151-9a65-de8a763bc701.jpg?v=1733769229', 'Green Trench Coat', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'White','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_5 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/casual-fashion-woman_925x_56b56608-f207-45c1-b677-bb5aa26c1c7a.jpg?v=1733769238');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_5.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/casual-fashion-woman_925x_56b56608-f207-45c1-b677-bb5aa26c1c7a.jpg?v=1733769238', 'Tennis Blue T-Shirt', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'Grey','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}

    {% if product_6 %}
      <div class="product-block">
        <div
          class="product-image"
          style="background-image: url('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/young-female-models-denim_925x_44c2cf9e-4030-4347-9d4a-f0e4a1479b4a.jpg?v=1733769226');"
        >
          <button
            class="open-popup-btn"
            data-product-id="{{ product_6.id }}"
            onclick="openPopup('https://cdn.shopify.com/s/files/1/0728/7252/6061/files/young-female-models-denim_925x_44c2cf9e-4030-4347-9d4a-f0e4a1479b4a.jpg?v=1733769226', 'Long Sleeve Tennis Top', 'This one-piece swimsuit is crafted from jersey featuring an allover micro Monogram motif in relief', 98000,'Blue','Black')"
          >
            +
          </button>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<!-- Popup Modal -->
<div id="product-popup" class="popup-modal" style="display: none;">
  <div class="popup-content">
    <span class="close-popup-btn" onclick="closePopup()">&times;</span>
    <!-- Product Details -->
    <div class="popup-product-details">
      <!-- Row 1: Image and Product Info -->
      <div class="product-row">
        <div class="product-image-container">
          <img id="popup-Product-Image" src="" alt="Product Image" width="20px" height="20px">
        </div>
        <div class="product-info-container">
          <h2 id="popup-product-name"></h2>
          <p id="popup-product-description"></p>
          <p id="popup-product-price"></p>
        </div>
      </div>
      <!-- Row 2: Color Selection -->
      <div class="product-row">
        <div id="product-color-options">
          <div id="productcolor1" class="color-option"></div>
          <div id="productcolor2" class="color-option"></div>
        </div>
      </div>

      <!-- Row 3: Size Selection -->
      <div class="product-row">
        <label for="product-size">Select Size:</label>
        <select id="product-size"></select>
      </div>

      <!-- Add to Cart Button -->
      <button id="add-to-cart-btn" onclick="addButton()">Add to Cart</button>
    </div>
  </div>
</div>
<script>
  // Variables to store the selected color and size
let selectedColor = null;
let selectedSize = null;
let productName = null;
let productPrice = null;

let cart = [];

function openPopup(imageUrl, name, description, price, color1, color2) {  
    // Set the popup content
    document.getElementById('popup-Product-Image').src = imageUrl;
    document.getElementById('popup-product-name').textContent = name;
    document.getElementById('popup-product-description').textContent = description;
    document.getElementById('popup-product-price').textContent = 'â‚¬' + price.toFixed(2);
    document.getElementById('product-popup').style.display = 'block';
   
    // Store the product name and price
    productName = name;
    productPrice = price;
  
    // Set colors for the color options divs
    const color1Element = document.getElementById('productcolor1');
    const color2Element = document.getElementById('productcolor2');
    color1Element.innerHTML = `${color1}`;
    color2Element.innerHTML = `${color2}`;
    
    // Event listeners to select colors
    color1Element.addEventListener('click', function(event) {
        selectColor(event, color1);
    });

    color2Element.addEventListener('click', function(event) {
        selectColor(event, color2);
    });
    
    // Set up the size select
    const sizeSelect = document.getElementById('product-size');
    sizeSelect.innerHTML = `
        <option value="xs">XS</option>
        <option value="s">S</option>
        <option value="m">M</option>
        <option value="l">L</option>
        <option value="xl">XL</option>
        <option value="2xl">2XL</option>
        <option value="6xl">6XL</option>`;
    
    // Update selectedSize whenever the user selects a size
    sizeSelect.addEventListener('change', function() {
        selectedSize = sizeSelect.value;  
    });
    
}

// Handle color selection
function selectColor(event, color) {
    const allColorDivs = document.querySelectorAll('.color-option');
    allColorDivs.forEach(div => div.classList.remove('selected'));
    event.target.classList.add('selected');
    selectedColor = color;
    console.log("Selected color: " + selectedColor);
}
function addButton() {
  console.log("Add to cart clicked");
  if (!selectedColor || !selectedSize) {
        alert("Please select both a color and a size.");
        return;
    }
    console.log(`Color: ${selectedColor}, Size: ${selectedSize} added to the cart!`);
 
    addToCart(selectedColor, selectedSize, productName, productPrice);
}
// Function to add the selected item to the cart
function addToCart(color, size, name, price) {
    console.log(`Product: ${name}, Color: ${color}, Size: ${size}, Price: $${price} added to the cart!`);
    const cartItem = {
        name: name,
        color: color,
        size: size,
        price: price
    };
  // Add the product to the cart array
    cart.push(cartItem);
   // Check if the added product is "Black" and "Medium"
    if (color === 'Black' && size === 'm') {
        // Add the "Soft Winter Jacket" to the cart if the condition is met
        const softWinterJacket = {
            name: 'Soft Winter Jacket',
            color: 'Black',
            size: 'm',
            price: 99.99 
        };
      cart.push(softWinterJacket);
        console.log('Soft Winter Jacket added to the cart because of Black and Medium selection.');
}
  cart.forEach((item, index) => {
        console.log(`Item ${index + 1}:`, item);
    });
}
// Close the popup
function closePopup() {
    document.getElementById('product-popup').style.display = 'none';
}
</script>

<style>
          .product-grid {
          width: 100%;
          margin: 0 auto;
        }

        .product-grid-container {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
          margin-top: 20px;
        }

        .product-block {
          position: relative;
        }

        .product-image {
          width: 100%;
          height: 250px;
          background-size: cover;
          background-position: center;
          position: relative;
        }

          .open-popup-btn {
          position: absolute;
          top: 10px;
          right: 10px;
          background-color: rgba(0, 0, 0, 0.7);
          color: #fff;
          border: none;
          border-radius: 50%;
          padding: 10px;
          font-size: 20px;
          cursor: pointer;
        }

         /* Modal Styling */
        .popup-modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.7);
          z-index: 9999;
          display: flex;
          justify-content: center;
          align-items: center;
        }

        /* Modal Content Styling */
        .popup-content {
          position: relative;
          background-color: #fff;
          padding: 20px;
          max-width: 800px;
          width: 100%;
          border-radius: 8px;
          display: flex;
          flex-direction: column;
          overflow-y: auto;
        }

        /* Close Button Styling */
        .close-popup-btn {
          position: absolute;
          top: 10px;
          right: 10px;
          font-size: 30px;
          color: #333;
          background: none;
          border: none;
          cursor: pointer;
        }

        /* Product Details Section */
        .popup-product-details {
          display: flex;
          flex-direction: column;
        }

        /* Row Layout */
        .product-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }

        .product-image-container {
          width: 40%;
        }

        .product-image-container img {
          width: 100%;
          height: auto;
          border-radius: 8px;
        }

        .product-info-container {
          width: 55%;
        }

        .product-info-container h2 {
          margin: 0;
          font-size: 24px;
        }

        .product-info-container p {
          font-size: 18px;
          color: #333;
        }

      product-row {
        display: flex;
        border: 2px solid #ccc;
        border-radius: 8px;
        margin-bottom: 10px;
    }

    #product-color-options {
        display: flex;
        width: 100%;
       border: 2px solid #ccc
    }

    #productcolor1, #productcolor2 {
        width: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        padding: 10px;
        text-align: center;
    }

    #productcolor1 {
        border-right: 2px solid #ccc;
    }
   .selected {
      border: 2px solid #000;
  }

                /* Styling for the product size dropdown */
                 #product-size {
                    padding: 5px;
                    font-size: 16px;
                    border-radius: 5px;
                    border: 1px solid #ccc;
                }
        /* Add to Cart Button */
        #add-to-cart-btn {
          padding: 10px 20px;
          font-size: 18px;
          background-color: #333;
          color: white;
          border: none;
          cursor: pointer;
          margin-top: 20px;
          border-radius: 5px;
        }

        #add-to-cart-btn:hover {
          background-color: #555;
        }
</style>
{% schema %}
 {
  "name": "Product Liquid",
  "settings": [
    {
      "type": "product",
      "label": "Select Product 1",
      "id": "product_1",
      "info": "Choose the first product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 2",
      "id": "product_2",
      "info": "Choose the second product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 3",
      "id": "product_3",
      "info": "Choose the third product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 4",
      "id": "product_4",
      "info": "Choose the fourth product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 5",
      "id": "product_5",
      "info": "Choose the fifth product for the grid."
    },
    {
      "type": "product",
      "label": "Select Product 6",
      "id": "product_6",
      "info": "Choose the sixth product for the grid."
    }
  ],
  "presets": [
    {
      "name":"Product Liquid",
    }
  ]
}
{% endschema %}
